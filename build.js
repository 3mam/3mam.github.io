function aa(){var a=e;function b(b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return a.getShaderParameter(c,a.COMPILE_STATUS)?c:-1}var d=function(c,d){c=b(c,a.VERTEX_SHADER);d=b(d,a.FRAGMENT_SHADER);var f=a.createProgram();a.attachShader(f,c);a.attachShader(f,d);a.linkProgram(f);return f}("\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0, 1);\n  v_texCoord = a_texCoord;\n}\n","\nprecision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvoid main() {\n   gl_FragColor = texture2D(u_image, v_texCoord);\n}\n"),
f=a.getAttribLocation(d,"a_position"),c=a.getAttribLocation(d,"a_texCoord");a.useProgram(d);d=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,d);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,-1,-1,1,1,1,-1]),a.STATIC_DRAW);a.enableVertexAttribArray(f);a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0);f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),a.STATIC_DRAW);a.enableVertexAttribArray(c);a.vertexAttribPointer(c,2,a.FLOAT,
!1,0,0);a.bindTexture(a.TEXTURE_2D,a.createTexture());a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)};var g=document.getElementById("canvas"),e=g.getContext("webgl"),m=null;e&&e instanceof WebGLRenderingContext?(m=document.createElement("canvas").getContext("2d"),aa()):m=g.getContext("2d");
var t=g.width,u=g.width,v=g.height,w=1,x=m.createImageData(t,g.height),y=x.data,z=0,B=255,C=[],C=[0,0,0,0,34,32,52,255,69,40,60,255,102,57,49,255,143,86,59,255,223,113,38,255,217,160,102,255,238,195,154,255,251,242,54,255,153,229,80,255,106,190,48,255,55,148,110,255,75,105,47,255,82,75,36,255,50,60,57,255,63,63,116,255,48,96,130,255,91,110,225,255,99,155,255,255,95,205,228,255,203,219,252,255,255,255,255,255,155,173,183,255,132,126,135,255,105,106,106,255,89,86,82,255,118,66,138,255,172,50,50,255,
217,87,99,255,215,123,186,255,143,151,74,255,138,111,48,255].slice(),D=[],E=[];function F(){for(var a=0;144>a;a+=8)for(var b=0;256>b;b+=8)E.push({x:b,y:a,flag:0})}var G=0,H=Date.now(),I=1E3/30,J=0;
function K(){window.requestAnimationFrame(K);G=Date.now();J=G-H;if(J>I){L();M(0,0,125,144,14);N(5,10,103,108,0);N(5,115,47,137,0);C[3]=255;var a,b,d,f,c;f=110;c=100;if(0===a||void 0===a)a=1;if(0===b||void 0===b)b=1;void 0===d?d=B:B=d;var l=255-d,h;a*=8;for(var r=8*b,k,n=0;n<r;n++)if(k=n+c,-1<k&&k<v)for(var A=0;A<a;A++)h=A+f,-1<h&&h<u&&(b=4*D[256*(n+E[0].y)+(A+E[0].x)],255===C[b+3]&&(h=4*(k*t+h),255>d?(y[h]=d*C[b]+l*y[h]>>8,y[h+1]=d*C[b+1]+l*y[h+1]>>8,y[h+2]=d*C[b+2]+l*y[h+2]>>8):(y[h]=C[b],y[h+1]=
C[b+1],y[h+2]=C[b+2])));P(8,8,6,11,96,96);C[3]=0;P(256,144,125,0);for(f=d=0;4>f;f++)for(c=0;8>c;c++)M(6+5*c,116+5*f,11+5*c,121+5*f,d),d++;if(Q||R){for(var p in S)ba(S[p])&&(Q?(d=S[p].c,f=S[p].f,c=T,void 0===c?c=z:z=c,D[f*t+d]=c):R&&(T=D[S[p].f*t+S[p].c]));for(p in U)if(ba(U[p]))a:{d=4*((U[p].y-0)*t+(U[p].x-0));for(f=0;f<C.length;f+=4)if(y[d]==C[f]&&y[d+1]==C[f+1]&&y[d+2]==C[f+2]){T=f/4;break a}T=void 0}}N(U[T].x-1,U[T].y-1,U[T].x+6,U[T].y+6,21);N(U[T].x,U[T].y,U[T].x+5,U[T].y+5,0);e?(e.texImage2D(e.TEXTURE_2D,
0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,x),e.drawArrays(e.TRIANGLES,0,6)):m.putImageData(x,0,0);H=G-J%I}}K();function V(){var a=window.innerWidth/w,b=window.innerHeight/w;g.height/g.width>b/a?a=b*g.width/g.height:b=a*g.height/g.width;g.style.width=a+"px";g.style.height=b+"px"}function T(a){z=a}
function W(a,b,d,f,c){var l=void 0;a-=0;d-=0;b-=0;f-=0;void 0===c?c=4*z:(z=c,c*=4);void 0===l?l=B:B=l;var h=255-l,r=Math.abs(d-a),k=-Math.abs(f-b),n,A,p=r+k,q;n=a<d?1:-1;for(A=b<f?1:-1;a!=d||b!=f;)q=2*p,q>=k&&(p+=k,a+=n),q<=r&&(p+=r,b+=A),-1<a&&a<u&&-1<b&&b<v&&(q=4*(b*t+a),255>l?(y[q]=l*C[c]+h*y[q]>>8,y[q+1]=l*C[c+1]+h*y[q+1]>>8,y[q+2]=l*C[c+2]+h*y[q+2]>>8):(y[q]=C[c],y[q+1]=C[c+1],y[q+2]=C[c+2]))}function N(a,b,d,f,c){W(a,b,d-1,b,c);W(d-1,b,d-1,f-1,c);W(a-1,f-1,d-2,f-1,c);W(a,b-1,a,f-2,c)}
function M(a,b,d,f,c){var l;a-=0;d-=0;f-=0;void 0===c?c=4*z:(z=c,c*=4);void 0===l?l=B:B=l;for(var h=255-l,r=b-0;r<f;r++)if(-1<r&&r<v)for(var k=a;k<d;k++)-1<k&&k<u&&(b=4*(r*t+k),255>l?(y[b]=l*C[c]+h*y[b]>>8,y[b+1]=l*C[c+1]+h*y[b+1]>>8,y[b+2]=l*C[c+2]+h*y[b+2]>>8):(y[b]=C[c],y[b+1]=C[c+1],y[b+2]=C[c+2]))}function L(){for(var a=0;a<y.length;a+=4)y[a]=0,y[a+1]=0,y[a+2]=0,y[a+3]=255}
function P(a,b,d,f,c,l){var h;d-=0;f-=0;void 0===c&&(c=a);void 0===l&&(l=b);void 0===h?h=B:B=h;var r=255-h,k,n;a=(a<<16)/c;b=(b<<16)/l;for(var A,p,q=0;q<l;q++)if(p=q+f,-1<p&&p<v)for(var O=0;O<c;O++)k=O+d,-1<k&&k<u&&(n=(O*a>>16)+0,A=(q*b>>16)+0,n=4*D[256*A+n],255===C[n+3]&&(k=4*(p*t+k),255===C[n+3]&&(255>h?(y[k]=h*C[n]+r*y[k]>>8,y[k+1]=h*C[n+1]+r*y[k+1]>>8,y[k+2]=h*C[n+2]+r*y[k+2]>>8):(y[k]=C[n],y[k+1]=C[n+1],y[k+2]=C[n+2]))))};window.addEventListener("resize",function(){V()});window.addEventListener("keydown",function(a){switch(a.key){case "F":case "1":w=1;V();break;case "2":w=2;V();break;case "3":w=3;V();break;case "4":w=4,V()}});V();L();if(null===localStorage.getItem("sprite")){for(var D=Array(36864),X=0;X<D.length;X++)D[X]=0;F();localStorage.setItem("sprite",JSON.stringify(D))}else D=JSON.parse(localStorage.getItem("sprite")),F();window.addEventListener("unload",function(){localStorage.setItem("sprite",JSON.stringify(D))});
var ca=0,da=0,Q=!1,R=!1;g.addEventListener("mousemove",function(a){var b=g.getBoundingClientRect();ca=Math.round((a.clientX-b.left)/(b.right-b.left)*g.width);da=Math.round((a.clientY-b.top)/(b.bottom-b.top)*g.height)});g.addEventListener("mousedown",function(a){switch(a.button){case 0:Q=!0;break;case 2:R=!0}});g.addEventListener("mouseup",function(a){switch(a.button){case 0:Q=!1;break;case 2:R=!1}});g.addEventListener("contextmenu",function(a){a.preventDefault()});
function ba(a){var b=ca,d=da;return b<a.x+a.b&&b+1>a.x&&d<a.y+a.a&&1+d>a.y}for(var S=Array(64),Y=X=0;8>Y;Y++)for(var Z=0;8>Z;Z++)S[X]={c:Y,f:Z,x:12*Y+6,y:12*Z+11,b:12,a:12},X++;for(var X=0,U=Array(32),Z=0;4>Z;Z++)for(Y=0;8>Y;Y++)U[X]={x:5*Y+6,y:5*Z+116,b:5,a:5},X++;for(var X=0,ea=Array(36864),Z=0;144>Z;Z++)for(Y=0;256>Y;Y++)ea[X]={x:8*Y+6,y:8*Z+116,b:8,a:8},X++;T=0;
